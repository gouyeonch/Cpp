# 4. 복사 생성자와 임시 객체

### 복사 생성자

객체를 복사해줄 때 클래스가 독립적으로 존재 할 수 있도록 복사 생성자를 명시할 필요가 있다



물론 명시하지 않아도 디폴트 생성자처럼 컴파일러가 자동으로 복사 생성자를 만든다

디폴트 복사 생성자 또한 기능자체에 신뢰가 떨어지는 편은 아닌거 같다

솔직히 포인터 사용 과정에서 일으키는 충돌을 제외하면 딱히 필요성은 못 느끼겠는데

어쨌든 해당 챕터는 복사 생성자에 관한 거니까 이것저것 건드리면서 설명을 하는 듯 하다



**함수 호출과 복사 생성자**

함수가 매개변수로 객체를 받을 때, 또는 반환값으로 객체를 줄 때

그 과정에서 클래스의 복사 생성자가 자연스레 관여하게 된다

이 챕터에서는 매개변수로 객체를 받을 때에 관해서만 얘기한다



사실 복사 생성자를 호출하는 거 자체가 부담이기 떄문에

참조자를 쓰는 게 훨씬 효율적이다

또한 참조하고 함수를 조작하는 과정에서 객체 값이 손상되지 않도록

상수형 참조로 해야한다



**깊은 복사와 얕은 복사**

내가 본 바로는 얕은 복사를 한다고 해서 일반적으로 문제되는 경우는 많이 없다

멤버에 포인터 연산이 포함되어 있는 경우, 대표적으로는 동적 할당을 하는 경우에 그렇다



자세한 내부 구조는 모르겠지만

얕은 복사를 할 때는 대충 단순대입연산자로 대응되는 멤버끼리 할당 하는 거 같다

그렇기 때문에 파생 객체가 원본 객체의 멤버를 참조하게 되고

각 객체는 독립성을 잃어버린다

즉, 파생 객체를 바꾸면 원본 객체의 값도 바뀔 수 있다는 말이다



그렇기 때문에 복사 생성자를 재정의 해줌으로서 깊은 복사를 해 줄 필요가 있다



생성자 말고 단순대입연산자를 통해 객체를 복사 할 수도 있는데 이런 경우는

연산자 다중 정의를 통해 따로 정의 해놔야 한다

약간 이래서 책 초입에서 단순대입연산자(=)보단 객체 할당 방식(a(b))을 이용하라고 한듯



